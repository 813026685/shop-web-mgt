(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ca72"],{"/mUX":function(t,e,a){"use strict";var r=a("M9xi");a.n(r).a},CmTb:function(t,e,a){"use strict";var r=a("ZH2M");a.n(r).a},DCtm:function(t,e,a){"use strict";var r=a("gV0M");a.n(r).a},"E/OR":function(t,e,a){},EXf5:function(t,e,a){},M9xi:function(t,e,a){},Nn9L:function(t,e,a){"use strict";var r=a("4d7F"),o=a.n(r),n=a("xA6U"),i={name:"uploadImage",props:{value:{type:String,default:""},domain:{type:String,default:""},businessNo:{type:String,default:""},businessType:{type:String,default:""}},data:function(){return{tempUrl:"",fileObj:{}}},computed:{imageUrl:function(){return this.value}},methods:{rmImage:function(){this.emitInput({imgUrl:"",objectKey:null})},emitInput:function(t){this.$emit("input",t)},handleImageSuccess:function(){this.emitInput(this.fileObj)},beforeUpload:function(){return new o.a(function(t,e){t(!0)})},handleUpload:function(t){var e=this,a=t.file,r=new FormData;r.append("file",a),r.append("domain",this.domain),r.append("businessNo",this.businessNo),r.append("businessType",this.businessType),Object(n.n)(r).then(function(t){console.log(t),e.$message.success("上传成功"),e.tempUrl=t.url,e.fileObj={imgUrl:t.url,objectKey:t.objectKey},e.handleImageSuccess()})}}},s=(a("CmTb"),a("KHd+")),l=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-upload",{staticClass:"image-uploader",attrs:{multiple:!1,"show-file-list":!1,"on-success":t.handleImageSuccess,drag:"",action:"","http-request":t.handleUpload}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])]),t._v(" "),a("div",{staticClass:"image-preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl,expression:"imageUrl"}],staticClass:"image-preview-wrapper"},[a("img",{attrs:{src:t.imageUrl+"?imageView2/1/w/200/h/200"}}),t._v(" "),a("div",{staticClass:"image-preview-action"},[a("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])])],1)},[],!1,null,"cc80d24e",null);l.options.__file="uploadImage.vue";e.a=l.exports},"R/6r":function(t,e,a){"use strict";var r=a("cO1o");a.n(r).a},UiAj:function(t,e,a){"use strict";var r=a("E/OR");a.n(r).a},Y5bG:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,a,r){return(t/=r/2)<1?a/2*t*t+e:-a/2*(--t*(t-2)-1)+e};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function o(t,e,a){var o=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,n=t-o,i=0;e=void 0===e?500:e;!function t(){i+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(i,o,n,e)),i<e?r(t):a&&"function"==typeof a&&a()}()}},ZH2M:function(t,e,a){},ZySA:function(t,e,a){"use strict";var r=a("P2sY"),o=a.n(r),n=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var r=o()({},e.value),n=o()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),i=n.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var s=i.getBoundingClientRect(),l=i.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",i.appendChild(l)),n.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=n.color,l.className="waves-ripple z-active",!1}},!1)}}),i=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(i)),n.install=i;e.a=n},a0Nf:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return l});var r=a("4d7F"),o=a.n(r),n=a("Kw5r"),i=a("hZMg");function s(t,e){return new o.a(function(a,r){Object(i.g)({typeCodes:e}).then(function(e){n.default.set(t,"codes",e);var r={},o={};for(var i in e){var s=e[i].__default__,l={};for(var u in s){var c=s[u].valCode;l[c]=s[u].valName,o[c]=s[u].valName}r[i]=l}r.__default__=o,n.default.set(t,"statusMap",r),a(1)})})}function l(t,e,a){return new o.a(function(r,o){Object(i.F)(e,a).then(function(e){var a={};for(var o in e){for(var i={},s=0;s<e[o].length;s++)i[e[o][s].value]=e[o][s].label;a[o]=i}n.default.set(t,"options",a),r(1)})})}},cO1o:function(t,e,a){},"gDS+":function(t,e,a){t.exports={default:a("oh+g"),__esModule:!0}},gV0M:function(t,e,a){},hZMg:function(t,e,a){"use strict";a.d(e,"z",function(){return o}),a.d(e,"y",function(){return n}),a.d(e,"x",function(){return i}),a.d(e,"A",function(){return s}),a.d(e,"B",function(){return l}),a.d(e,"l",function(){return u}),a.d(e,"E",function(){return c}),a.d(e,"F",function(){return m}),a.d(e,"db",function(){return d}),a.d(e,"fb",function(){return f}),a.d(e,"eb",function(){return p}),a.d(e,"gb",function(){return b}),a.d(e,"X",function(){return v}),a.d(e,"Z",function(){return h}),a.d(e,"Y",function(){return g}),a.d(e,"K",function(){return y}),a.d(e,"L",function(){return _}),a.d(e,"N",function(){return k}),a.d(e,"M",function(){return D}),a.d(e,"H",function(){return w}),a.d(e,"J",function(){return S}),a.d(e,"I",function(){return O}),a.d(e,"T",function(){return j}),a.d(e,"W",function(){return x}),a.d(e,"V",function(){return C}),a.d(e,"U",function(){return V}),a.d(e,"S",function(){return $}),a.d(e,"k",function(){return N}),a.d(e,"j",function(){return I}),a.d(e,"R",function(){return P}),a.d(e,"e",function(){return U}),a.d(e,"c",function(){return F}),a.d(e,"d",function(){return T}),a.d(e,"b",function(){return A}),a.d(e,"f",function(){return G}),a.d(e,"g",function(){return E}),a.d(e,"ab",function(){return R}),a.d(e,"cb",function(){return L}),a.d(e,"bb",function(){return q}),a.d(e,"O",function(){return B}),a.d(e,"Q",function(){return M}),a.d(e,"P",function(){return z}),a.d(e,"i",function(){return K}),a.d(e,"h",function(){return Q}),a.d(e,"m",function(){return Z}),a.d(e,"o",function(){return H}),a.d(e,"n",function(){return J}),a.d(e,"s",function(){return X}),a.d(e,"u",function(){return Y}),a.d(e,"t",function(){return W}),a.d(e,"p",function(){return tt}),a.d(e,"D",function(){return et}),a.d(e,"G",function(){return at}),a.d(e,"w",function(){return rt}),a.d(e,"C",function(){return ot}),a.d(e,"q",function(){return nt}),a.d(e,"r",function(){return it}),a.d(e,"a",function(){return st}),a.d(e,"v",function(){return lt}),a.d(e,"hb",function(){return ut});var r=a("t3Un");function o(t){return Object(r.a)({url:"/api/sys/region/child/"+t,method:"get"})}function n(t){return Object(r.a)({url:"/api/sys/region/depth/"+t,method:"get"})}function i(){return Object(r.a)({url:"/api/sys/region/all",method:"get"})}function s(t){return Object(r.a)({url:"/api/sys/region/list",method:"post",params:t})}function l(t){return Object(r.a)({url:"/api/sys/region/save",method:"post",data:t})}function u(t,e){return Object(r.a)({url:"/api/sys/region/init/"+t,method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:e})}function c(t,e){return Object(r.a)({url:"/api/sys/select/"+t,method:"post",params:e})}function m(t,e){return Object(r.a)({url:"/api/sys/selects/"+t,method:"post",params:e})}function d(t){return Object(r.a)({url:"/api/sys/user/list",method:"post",params:t})}function f(t){return Object(r.a)({url:"/api/sys/user/save",method:"post",data:t})}function p(t){return Object(r.a)({url:"/api/sys/user/remove/"+t,method:"delete"})}function b(t,e){return Object(r.a)({url:"/api/sys/user/status/"+t+"/"+e,method:"put"})}function v(t){return Object(r.a)({url:"/api/sys/role/list",method:"post",params:t})}function h(t){return Object(r.a)({url:"/api/sys/role/save",method:"post",data:t})}function g(t){return Object(r.a)({url:"/api/sys/role/remove/"+t,method:"delete"})}function y(t){return Object(r.a)({url:"/api/sys/authority/list",method:"post",params:t})}function _(t){return Object(r.a)({url:"/api/sys/authority/_list",method:"post",params:t})}function k(t){return Object(r.a)({url:"/api/sys/authority/save",method:"post",data:t})}function D(t){return Object(r.a)({url:"/api/sys/authority/remove/"+t,method:"delete"})}function w(t){return Object(r.a)({url:"/api/sys/apiList/list",method:"post",params:t})}function S(t){return Object(r.a)({url:"/api/sys/apiList/save",method:"post",data:t})}function O(t){return Object(r.a)({url:"/api/sys/apiList/remove/"+t,method:"delete"})}function j(t){return Object(r.a)({url:"/api/sys/menu/list",method:"post",params:t})}function x(t){return Object(r.a)({url:"/api/sys/menu/tree_list",method:"post",params:t})}function C(t){return Object(r.a)({url:"/api/sys/menu/save",method:"post",data:t})}function V(t){return Object(r.a)({url:"/api/sys/menu/remove/"+t,method:"delete"})}function $(t){return Object(r.a)({url:"/api/sys/menu/detail/"+t,method:"get"})}function N(t){return Object(r.a)({url:"/api/sys/role/menu/"+t,method:"get"})}function I(t){return Object(r.a)({url:"/api/sys/role/authorities/"+t,method:"get"})}function P(t){return Object(r.a)({url:"/api/sys/menu/authorities/"+t,method:"get"})}function U(t){return Object(r.a)({url:"/api/sys/grant/user_roles",method:"post",data:t})}function F(t){return Object(r.a)({url:"/api/sys/grant/role_menu",method:"post",data:t})}function T(t){return Object(r.a)({url:"/api/sys/grant/role_authorities",method:"post",data:t})}function A(t){return Object(r.a)({url:"/api/sys/grant/menu_authorities",method:"post",data:t})}function G(t){return Object(r.a)({url:"/api/sys/code/cache",method:"get",params:t})}function E(t){return Object(r.a)({url:"/api/sys/code/caches",method:"post",params:t})}function R(t){return Object(r.a)({url:"/api/sys/code/type/list",method:"post",params:t})}function L(t){return Object(r.a)({url:"/api/sys/code/type/save",method:"post",data:t})}function q(t){return Object(r.a)({url:"/api/sys/code/type/remove/"+t,method:"delete"})}function B(t){return Object(r.a)({url:"/api/sys/code/list",method:"post",params:t})}function M(t){return Object(r.a)({url:"/api/sys/code/save",method:"post",data:t})}function z(t){return Object(r.a)({url:"/api/sys/code/remove/"+t,method:"delete"})}function K(){return Object(r.a)({url:"/api/sys/code/type/last_code",method:"get"})}function Q(t){return Object(r.a)({url:"/api/sys/code/"+t+"/last_code",method:"get"})}function Z(t){return Object(r.a)({url:"/api/sys/jobs/details/list",method:"post",params:t})}function H(t){return Object(r.a)({url:"/api/sys/jobs/details/save",method:"post",data:t})}function J(t){return Object(r.a)({url:"/api/sys/jobs/details/remove/"+t,method:"delete"})}function X(t){return Object(r.a)({url:"/api/sys/jobs/trigger/list",method:"post",params:t})}function Y(t){return Object(r.a)({url:"/api/sys/jobs/trigger/save",method:"post",data:t})}function W(t){return Object(r.a)({url:"/api/sys/jobs/trigger/remove/"+t,method:"delete"})}function tt(t){return Object(r.a)({url:"/api/sys/jobs/instance/list",method:"post",params:t})}function et(t){return Object(r.a)({url:"/api/sys/jobs/instance/save",method:"post",data:t})}function at(t){return Object(r.a)({url:"/api/sys/jobs/instance/start/"+t,method:"post"})}function rt(t){return Object(r.a)({url:"/api/sys/jobs/instance/pause/"+t,method:"post"})}function ot(t){return Object(r.a)({url:"/api/sys/jobs/instance/remove/"+t,method:"post"})}function nt(t){return Object(r.a)({url:"/api/sys/jobs/instance/logs/list",method:"post",params:t})}function it(t){return Object(r.a)({url:"/api/sys/jobs/instance/logs/statistics",method:"post",params:t})}function st(t){return Object(r.a)({url:"/api/sys/metadata/table/all_list",method:"post",params:t})}function lt(t){return Object(r.a)({url:"/api/sys/metadata/details/"+t,method:"get"})}function ut(){return Object(r.a)({url:"/api/sys/metadata/sync",method:"post"})}},iL2x:function(t,e,a){"use strict";var r=a("qPXm");a.n(r).a},ibIy:function(t,e,a){"use strict";var r=a("wGFE");a.n(r).a},jUE0:function(t,e,a){},"oh+g":function(t,e,a){var r=a("WEpk"),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},qPXm:function(t,e,a){},tGpm:function(t,e,a){"use strict";var r=a("EXf5");a.n(r).a},wGFE:function(t,e,a){},xA6U:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"c",function(){return n}),a.d(e,"b",function(){return i}),a.d(e,"e",function(){return s}),a.d(e,"j",function(){return l}),a.d(e,"i",function(){return u}),a.d(e,"k",function(){return c}),a.d(e,"l",function(){return m}),a.d(e,"m",function(){return d}),a.d(e,"d",function(){return f}),a.d(e,"f",function(){return p}),a.d(e,"g",function(){return b}),a.d(e,"h",function(){return v}),a.d(e,"n",function(){return h});var r=a("t3Un");function o(t){return Object(r.a)({url:"/api/category/list",method:"post",params:t})}function n(t){return Object(r.a)({url:"/api/category/save",method:"post",data:t})}function i(t){return Object(r.a)({url:"/api/category/"+t+"/remove",method:"delete"})}function s(t){return Object(r.a)({url:"/api/goods/list",method:"post",params:t})}function l(t){return Object(r.a)({url:"/api/goods/save",method:"post",data:t})}function u(t){return Object(r.a)({url:"/api/goods/"+t+"/remove",method:"delete"})}function c(t,e){return Object(r.a)({url:"/api/goods/"+t+"/update",method:"put",data:e})}function m(t,e){return Object(r.a)({url:"/api/goods/"+t+"/pic/update",method:"put",data:e})}function d(t,e){return Object(r.a)({url:"/api/goods/"+t+"/update_status",method:"put",data:e})}function f(t){return Object(r.a)({url:"/api/goods/detail/"+t,method:"get"})}function p(t){return Object(r.a)({url:"/api/goods/pictures/"+t,method:"get"})}function b(t){return Object(r.a)({url:"/api/goods/pictures/remove/"+t,method:"delete"})}function v(t){return Object(r.a)({url:"/api/goods/records/"+t,method:"get"})}function h(t){return Object(r.a)({url:"/api/sys/attachments/upload",method:"post",timeout:3e5,data:t})}},yZu5:function(t,e,a){"use strict";a.r(e);var r=a("P2sY"),o=a.n(r),n=a("ZySA"),i=a("4d7F"),s=a.n(i),l=a("GQeE"),u=a.n(l),c=a("xA6U"),m={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"},domain:{type:String,default:""},businessNo:{type:String,default:""},businessType:{type:String,default:""}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return u()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=u()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var a=e.uid,r=u()(this.listObj),o=0,n=r.length;o<n;o++)if(this.listObj[r[o]].uid===a)return this.listObj[r[o]].url=t.files.file,void(this.listObj[r[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,a=u()(this.listObj),r=0,o=a.length;r<o;r++)if(this.listObj[a[r]].uid===e)return void delete this.listObj[a[r]]},beforeUpload:function(t){var e=this,a=window.URL||window.webkitURL,r=t.uid;return this.listObj[r]={},new s.a(function(o,n){var i=new Image;i.src=a.createObjectURL(t),i.onload=function(){e.listObj[r]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)})},handleUpload:function(t){var e=this,a=t.file,r=new FormData;r.append("file",a),r.append("domain",this.domain),r.append("businessNo",this.businessNo),r.append("businessType",this.businessType),r.append("file",a),Object(c.n)(r).then(function(t){console.log(t),e.$message.success("上传成功"),e.handleSuccess(t,a)})}}},d=(a("tGpm"),a("KHd+")),f=Object(d.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n    ")]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"","http-request":t.handleUpload,"list-type":"picture-card"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"1d820bc2",null);f.options.__file="editorImage.vue";var p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],b=["bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],v={name:"Tinymce",components:{editorImage:f.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360},domain:{type:String,default:""},businessNo:{type:String,default:""},businessType:{type:String,default:""}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:b,menubar:this.menubar,plugins:p,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",a.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},h=(a("DCtm"),Object(d.a)(v,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff",domain:this.domain,businessNo:this.businessNo,businessType:this.businessType},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"2e1887b7",null));h.options.__file="index.vue";var g=h.exports,y=a("Nn9L"),_=a("ZfUE"),k=a("a0Nf"),D=a("bY1+"),w=a("BEYb"),S=a("8Cku"),O=a("gDS+"),j=a.n(O),x=[{label:"周期",value:""},{label:"重量",value:""},{label:"生产地",value:""}],C={name:"goodsParams",directives:{waves:n.a},props:{value:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"50%"},top:{type:String,default:"15vh"}},filters:{},data:function(){return{cacheData:{},dynamicDataForm:{params:[]},rules:{}}},computed:{formVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},mounted:function(){if(this.value){var t=this.value;t=JSON.parse(this.value);var e=[];for(var a in t)e.push({label:a,value:t[a]});this.dynamicDataForm.params=e}else this.dynamicDataForm.params=x},methods:{resetForm:function(){this.$refs.dynamicDataForm.resetFields()},removeItem:function(t){var e=this.dynamicDataForm.params.indexOf(t);-1!==e&&this.dynamicDataForm.params.splice(e,1)},addItem:function(){var t=this;this.$prompt("请输入参数名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[A-Za-z0-9\u4e00-\u9fa5]{1,10}$/,inputErrorMessage:"请输入1-10个数字字母或中文字符"}).then(function(e){var a=e.value;t.dynamicDataForm.params&&t.dynamicDataForm.params.length>0&&t.dynamicDataForm.params.some(function(t){return t.label==a})?t.$message({type:"warning",message:"参数已存在，请勿重复添加！"}):t.dynamicDataForm.params.push({value:"",label:a})})},handleCancel:function(t){this.$emit("onCancel",t)},handleFormSave:function(){var t=this;this.$refs.dynamicDataForm.validate(function(e){if(!e)return!1;var a={};t.dynamicDataForm.params.forEach(function(t){a[t.label]=t.value}),t.$emit("onSubmit",j()(a))})}}},V=(a("iL2x"),Object(d.a)(C,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-container"},[a("el-dialog",{attrs:{center:!0,title:"参数",top:t.top,width:t.width,visible:t.formVisible,fullscreen:!0},on:{"update:visible":function(e){t.formVisible=e},close:t.handleCancel}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"dynamic-action"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.add"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small",type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.addItem}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.reset"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small",icon:"el-icon-close",circle:""},on:{click:t.resetForm}})],1)],1)])],1),t._v(" "),a("el-form",{ref:"dynamicDataForm",staticClass:"dynamic-form",attrs:{model:t.dynamicDataForm,"label-width":"100px"}},t._l(t.dynamicDataForm.params,function(e,r){return a("el-form-item",{key:r,attrs:{label:e.label,prop:"params."+r+".value",rules:{required:!0,message:e.label+"不能为空",trigger:"blur"}}},[a("el-input",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){a.preventDefault(),t.removeItem(e)}}})],1)})),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",[a("el-button",{attrs:{waves:"",type:"primary"},on:{click:t.handleFormSave}},[t._v(t._s(t.$t("table.confirm")))]),t._v(" "),a("el-button",{on:{click:t.handleCancel}},[t._v(t._s(t.$t("table.cancel")))])],1)])],1)],1)},[],!1,null,"42b600dc",null));V.options.__file="goodsParams.vue";var $=V.exports,N={name:"goodsBasic",components:{SysCode:_.a,DySelect:D.a,Tinymce:g,FormDialog:w.a,UploadImage:y.a,GoodsParams:$},directives:{waves:n.a},filters:{},data:function(){return{cacheData:{},formData:{id:null,remark:"",status:"",description:"",thumbnail:"",goodsName:"",marketPrice:0,sellingPrice:0,goodsNo:"",merchantNo:"",stockNum:0,hot:!1,tags:"",salesVolume:0,categoryId:"",content:""},formVisibleParams:!1,formVisibleSku:!1,formVisibleAttrValue:!1,paramsReady:!1,formDataSku:{goodsId:"",skuName:"",skuParams:"",imgUrl:"",costPrice:0,marketPrice:0,sellingPrice:0,remark:"",stockNum:0,valueIds:[],id:null,byOrder:0},skus:[],attrs:[],attrsValues:[],formVisibleGroup:!1,isEditSku:!1,isEditGroup:!1,isEditAttrValue:!1,formDataGroup:{id:"",goodsId:"",ks:"",name:"",byOrder:0},formDataAttrValue:{id:"",attrId:"",imgUrl:"",name:"",byOrder:0},loading:!1,rules:{merchantNo:[{required:!0,message:"商户编号必选择",trigger:"blur"}],goodsName:[{required:!0,message:"名称必填",trigger:"blur"}],goodsNo:[{required:!0,message:"编号必填",trigger:"blur"}]},rulesSku:{skuName:[{required:!0,message:"Sku名称",trigger:"blur"}],costPrice:[{required:!0,message:"成本价",trigger:"blur"}],marketPrice:[{required:!0,message:"原价",trigger:"blur"}],sellingPrice:[{required:!0,message:"卖价",trigger:"blur"}]},rulesGroup:{name:[{required:!0,message:"名称必填",trigger:"blur"}]},rulesAttrValue:{name:[{required:!0,message:"名称必填",trigger:"blur"}],attrId:[{required:!0,message:"规格必选",trigger:"blur"}]}}},computed:{},mounted:function(){var t=this;Object(k.a)(this.cacheData,"1000").then(function(){Object(c.d)(t.$route.params.goodsId).then(function(e){e&&(t.formData=e.basic,t.skus=e.skus||[],t.attrs=e.attrs||[],t.attrsValues=e.attrsValues||[],t.paramsReady=!0)})})},methods:{attrValueFilter:function(t){var e=this.attrs.filter(function(e){return t==e.id})[0];return e?e.name:"无"},handleFormSave:function(){var t=this;this.$refs.formData.validate(function(e){if(!e)return!1;t.loading=!0;var a={basic:t.formData,skuDtos:t.skus,attrs:t.attrs,attrsValues:t.attrsValues,remark:"更新商品"};Object(c.k)(t.$route.params.goodsId,a).then(function(e){t.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3})}).catch(function(t){console.log(t)}).finally(function(){t.loading=!1})})},formOpenSku:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEditSku=e,this.formVisibleSku=!0,e?this.formDataSku=o()({},t):(this.formDataSku={},this.formDataSku.id=S.b.v4().replace(/-/g,""),this.formDataSku.goodsId=this.$route.params.goodsId)},formCloseSku:function(){this.formVisibleSku=!1,this.$refs.formDataSku.resetFields()},handleFormSaveSku:function(){var t=this;this.$refs.formDataSku.validate(function(e){if(!e)return!1;t.skus=t.skus.filter(function(e){return t.formDataSku.id!=e.id}),t.skus.push(o()({},t.formDataSku)),t.formVisibleSku=!1})},handleRemoveSku:function(t){var e=this;this.$confirm("确认删除这条记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.skus=e.skus.filter(function(e){return t!=e.id})})},formOpenGroup:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEditGroup=e,this.formVisibleGroup=!0,e?this.formDataGroup=o()({},t):(this.formDataGroup={},this.formDataGroup.id=S.b.v4().replace(/-/g,""),this.formDataGroup.goodsId=this.$route.params.goodsId)},formCloseGroup:function(){this.formVisibleGroup=!1,this.$refs.formDataGroup.resetFields()},handleRemoveGroup:function(t){var e=this;this.$confirm("确认删除所有关联属性？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=e.attrs.filter(function(e){return t==e.id})[0];a&&(e.attrsValues=e.attrsValues.filter(function(t){return a.id!=t.attrId})),e.attrs=e.attrs.filter(function(e){return t!=e.id})})},handleFormSaveGroup:function(){var t=this;this.$refs.formDataGroup.validate(function(e){e&&(t.attrs=t.attrs.filter(function(e){return t.formDataGroup.id!=e.id}),t.attrs.push(o()({},t.formDataGroup)),t.formVisibleGroup=!1)})},formOpenAttrValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEditAttrValue=e,this.formVisibleAttrValue=!0,e?this.formDataAttrValue=o()({},t):(this.formDataAttrValue={},this.formDataAttrValue.id=S.b.v4().replace(/-/g,""))},formCloseAttrValue:function(){this.formVisibleAttrValue=!1,this.$refs.formDataAttrValue.resetFields()},handleRemoveAttrValue:function(t){var e=this;this.$confirm("确认删除这条记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.attrsValues=e.attrsValues.filter(function(e){return t!=e.id})})},handleFormSaveAttrValue:function(){var t=this;this.$refs.formDataAttrValue.validate(function(e){e&&(t.attrsValues=t.attrsValues.filter(function(e){return t.formDataAttrValue.id!=e.id}),t.attrsValues.push(o()({},t.formDataAttrValue)),t.formVisibleAttrValue=!1)})},formOpenParams:function(){this.formVisibleParams=!0},formCloseParams:function(){this.formVisibleParams=!1},handleFormSaveParams:function(t){this.formData.goodsParams=t,this.formCloseParams()},updateImgUrl:function(t){this.formDataAttrValue.imgUrl=t.imgUrl},updateSkuImgUrl:function(t){this.formDataSku.imgUrl=t.imgUrl},updateThumbnailUrl:function(t){this.formData.thumbnail=t.imgUrl}}},I=(a("R/6r"),Object(d.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-container"},[a("h3",[a("svg-icon",{attrs:{"icon-class":"menu"}}),t._v(" 基本信息")],1),t._v(" "),a("el-form",{ref:"formData",attrs:{rules:t.rules,model:t.formData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商户",prop:"merchantNo"}},[a("dy-select",{attrs:{placeholder:"请选择商户",disabled:!0,selected:t.formData.merchantNo,selectType:"MERCHANT"},on:{"update:selected":function(e){t.$set(t.formData,"merchantNo",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品编号",prop:"goodsNo"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.goodsNo,callback:function(e){t.$set(t.formData,"goodsNo",e)},expression:"formData.goodsNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"缩略图",prop:"thumbnail"}},[a("upload-image",{attrs:{value:t.formData.thumbnail||"",domain:"goods",businessNo:t.formData.id,businessType:"101500"},on:{input:t.updateThumbnailUrl}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.goodsName,callback:function(e){t.$set(t.formData,"goodsName",e)},expression:"formData.goodsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"月销量",prop:"salesVolume"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.salesVolume,callback:function(e){t.$set(t.formData,"salesVolume",e)},expression:"formData.salesVolume"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品库存",prop:"stockNum"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.stockNum,callback:function(e){t.$set(t.formData,"stockNum",e)},expression:"formData.stockNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"热销",prop:"hot"}},[a("el-radio-group",{model:{value:t.formData.hot,callback:function(e){t.$set(t.formData,"hot",e)},expression:"formData.hot"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标签",prop:"tags"}},[a("el-radio-group",{model:{value:t.formData.tags,callback:function(e){t.$set(t.formData,"tags",e)},expression:"formData.tags"}},[a("el-radio",{attrs:{label:"热销"}},[t._v("热销")]),t._v(" "),a("el-radio",{attrs:{label:"力推"}},[t._v("力推")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品参数",prop:"goodsParams"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-edit"},on:{click:t.formOpenParams}},[t._v("点击进行编辑")])],1),t._v(" "),a("el-form-item",{attrs:{label:"原价",prop:"marketPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.marketPrice,callback:function(e){t.$set(t.formData,"marketPrice",e)},expression:"formData.marketPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卖价",prop:"sellingPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.sellingPrice,callback:function(e){t.$set(t.formData,"sellingPrice",e)},expression:"formData.sellingPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品介绍",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},autocomplete:"off"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1),t._v(" "),a("h3",[a("svg-icon",{attrs:{"icon-class":"menu"}}),t._v(" 商品规格")],1),t._v(" "),a("el-row",{staticClass:"group-tag"},[t._l(t.attrs,function(e){return a("el-tag",{key:e.id,staticClass:"tag",attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleRemoveGroup(e.id)}}},[t._v("\n            "+t._s(e.name)+"("+t._s(e.byOrder)+")\n        ")])}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.formOpenGroup}},[t._v("新增")])],2),t._v(" "),a("div",{staticClass:"actions-container"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.formOpenAttrValue}},[t._v(t._s(t.$t("table.add")))])],1),t._v(" "),a("el-col",{attrs:{span:4}})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.attrsValues,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"属性",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"规格",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.attrValueFilter(e.row.attrId)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"avatar",attrs:{src:t.row.imgUrl}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.byOrder))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.edit"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.formOpenAttrValue(e.row,!0)}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.delete"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){t.handleRemoveAttrValue(e.row.id)}}})],1)]}}])})],1),t._v(" "),a("form-dialog",{attrs:{visible:t.formVisibleGroup,title:t.isEditGroup?t.$t("table.edit"):t.$t("table.add")},on:{"update:visible":function(e){t.formVisibleGroup=e},onCancel:t.formCloseGroup,onSubmit:t.handleFormSaveGroup}},[a("el-form",{ref:"formDataGroup",attrs:{rules:t.rulesGroup,model:t.formDataGroup,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品ID",prop:"goodsId"}},[a("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:t.formDataGroup.goodsId,callback:function(e){t.$set(t.formDataGroup,"goodsId",e)},expression:"formDataGroup.goodsId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataGroup.name,callback:function(e){t.$set(t.formDataGroup,"name",e)},expression:"formDataGroup.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"byOrder"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataGroup.byOrder,callback:function(e){t.$set(t.formDataGroup,"byOrder",e)},expression:"formDataGroup.byOrder"}})],1)],1)],1),t._v(" "),a("form-dialog",{attrs:{visible:t.formVisibleAttrValue,title:t.isEditAttrValue?t.$t("table.edit"):t.$t("table.add")},on:{"update:visible":function(e){t.formVisibleAttrValue=e},onCancel:t.formCloseAttrValue,onSubmit:t.handleFormSaveAttrValue}},[a("el-form",{ref:"formDataAttrValue",attrs:{rules:t.rulesAttrValue,model:t.formDataAttrValue,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"规格",prop:"attrId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择规格"},model:{value:t.formDataAttrValue.attrId,callback:function(e){t.$set(t.formDataAttrValue,"attrId",e)},expression:"formDataAttrValue.attrId"}},t._l(t.attrs,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"属性",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataAttrValue.name,callback:function(e){t.$set(t.formDataAttrValue,"name",e)},expression:"formDataAttrValue.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"imgUrl"}},[a("upload-image",{attrs:{value:t.formDataAttrValue.imgUrl,domain:"goods",businessNo:t.formData.id,businessType:"101500"},on:{input:t.updateImgUrl}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"byOrder"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataAttrValue.byOrder,callback:function(e){t.$set(t.formDataAttrValue,"byOrder",e)},expression:"formDataAttrValue.byOrder"}})],1)],1)],1),t._v(" "),a("h3",[a("svg-icon",{attrs:{"icon-class":"menu"}}),t._v(" 商品SKU")],1),t._v(" "),a("div",{staticClass:"actions-container"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.formOpenSku}},[t._v(t._s(t.$t("table.add")))])],1),t._v(" "),a("el-col",{attrs:{span:6}})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.skus,border:"",fit:""}},[a("el-table-column",{attrs:{label:"Sku名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.skuName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"成本价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.costPrice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"原价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.marketPrice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"卖价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellingPrice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"avatar",attrs:{src:t.row.imgUrl}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.byOrder))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.edit"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.formOpenSku(e.row,!0)}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.delete"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){t.handleRemoveSku(e.row.id)}}})],1)]}}])})],1),t._v(" "),a("form-dialog",{attrs:{visible:t.formVisibleSku,title:t.$t("table.add")},on:{"update:visible":function(e){t.formVisibleSku=e},onCancel:t.formCloseSku,onSubmit:t.handleFormSaveSku}},[a("el-form",{ref:"formDataSku",attrs:{rules:t.rulesSku,model:t.formDataSku,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品ID",prop:"goodsId"}},[a("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:t.formDataSku.goodsId,callback:function(e){t.$set(t.formDataSku,"goodsId",e)},expression:"formDataSku.goodsId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Sku名称",prop:"skuName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataSku.skuName,callback:function(e){t.$set(t.formDataSku,"skuName",e)},expression:"formDataSku.skuName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"imgUrl"}},[a("upload-image",{attrs:{value:t.formDataSku.imgUrl,domain:"goods",businessNo:t.formData.id,businessType:"101500"},on:{input:t.updateSkuImgUrl}})],1),t._v(" "),a("el-form-item",{attrs:{label:"属性",prop:"attrId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:!0,placeholder:"请选择属性"},model:{value:t.formDataSku.valueIds,callback:function(e){t.$set(t.formDataSku,"valueIds",e)},expression:"formDataSku.valueIds"}},t._l(t.attrsValues,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"成本价",prop:"costPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataSku.costPrice,callback:function(e){t.$set(t.formDataSku,"costPrice",e)},expression:"formDataSku.costPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"原价",prop:"marketPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataSku.marketPrice,callback:function(e){t.$set(t.formDataSku,"marketPrice",e)},expression:"formDataSku.marketPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卖价",prop:"sellingPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataSku.sellingPrice,callback:function(e){t.$set(t.formDataSku,"sellingPrice",e)},expression:"formDataSku.sellingPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"库存",prop:"sellingPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataSku.stockNum,callback:function(e){t.$set(t.formDataSku,"stockNum",e)},expression:"formDataSku.stockNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Sku参数",prop:"skuParams"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.formDataSku.skuParams,callback:function(e){t.$set(t.formDataSku,"skuParams",e)},expression:"formDataSku.skuParams"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"byOrder"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formDataSku.byOrder,callback:function(e){t.$set(t.formDataSku,"byOrder",e)},expression:"formDataSku.byOrder"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.formDataSku.remark,callback:function(e){t.$set(t.formDataSku,"remark",e)},expression:"formDataSku.remark"}})],1)],1)],1),t._v(" "),t.paramsReady?a("goods-params",{attrs:{visible:t.formVisibleParams,value:t.formData.goodsParams,title:"商品参数"},on:{"update:visible":function(e){t.formVisibleParams=e},onCancel:t.formCloseParams,onSubmit:t.handleFormSaveParams}}):t._e(),t._v(" "),a("h3",[a("svg-icon",{attrs:{"icon-class":"menu"}}),t._v(" 商品详情")],1),t._v(" "),a("div",[a("tinymce",{attrs:{height:300,domain:"goods",businessNo:t.formData.id,businessType:"101500"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),t._v(" "),a("div",{staticClass:"editor-content",domProps:{innerHTML:t._s(t.formData.content)}}),t._v(" "),a("div",[a("el-button",{attrs:{waves:"",type:"primary"},on:{click:t.handleFormSave}},[t._v(t._s(t.$t("table.submit")))])],1)],1)},[],!1,null,"1913e6c4",null));I.options.__file="goodsBasic.vue";var P=I.exports,U=(a("7Qib"),a("Mz3J")),F=a("gJ+i"),T={name:"goodsRecord",components:{Pagination:U.a,SysCode:_.a,FormDialog:w.a,DyFilterInput:F.a},directives:{waves:n.a},filters:{},data:function(){return{cacheData:{},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{pageNum:0,pageSize:10,orderBy:"+id"}}},mounted:function(){var t=this;Object(k.a)(this.cacheData,"1012").then(function(){t.handleQueryList()})},methods:{cellStyle:function(){return"padding: 5px 0px;"},handleFilter:function(){this.handleQueryList()},handleQueryList:function(){var t=this;this.listLoading=!0,Object(c.h)(this.$route.params.goodsId).then(function(e){t.list=e}).catch(function(t){console.log(t)}).finally(function(){t.listLoading=!1})}}},A=(a("UiAj"),Object(d.a)(T,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"actions-container"}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"createdDate",order:"descending"}}},[a("el-table-column",{attrs:{type:"index",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"之前状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("statusFilter")(e.row.beforeStatus,t.cacheData.statusMap[1012])))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("statusFilter")(e.row.status,t.cacheData.statusMap[1012])))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作人",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.operator))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createdTime",sortable:"",label:t.$t("table.createdTime"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.createdTime)))])]}}])})],1)],1)},[],!1,null,"495ba11d",null));A.options.__file="goodsRecord.vue";var G=A.exports,E={name:"goodsPictures",components:{SysCode:_.a,FormDialog:w.a,UploadImage:y.a},directives:{waves:n.a},filters:{},data:function(){return{cacheData:{},pictures:[],formVisible:!1,isEdit:!1,formData:{id:null,goodsId:"",imgDesc:"",imgPath:"",imgUrl:"",byOrder:0},rules:{imgDesc:[{required:!0,message:"描述",trigger:"blur"}],imgUrl:[{required:!0,message:"请上传图片",trigger:"blur"}]}}},mounted:function(){var t=this;Object(c.f)(this.$route.params.goodsId).then(function(e){e&&(t.pictures=e)})},methods:{cellStyle:function(){return"padding: 5px 0px;"},handleFilter:function(){this.handleQueryList()},handleQueryList:function(){var t=this;Object(c.f)(this.$route.params.goodsId).then(function(e){t.pictures=e}).catch(function(t){console.log(t)}).finally(function(){})},formOpen:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEdit=e,this.formVisible=!0,e?this.formData=o()({},t):(this.formData={},this.formData.id=S.b.v4().replace(/-/g,""),this.formData.goodsId=this.$route.params.goodsId)},formClose:function(){this.formVisible=!1,this.$refs.formData.resetFields()},handleRemove:function(t){var e=this;this.$confirm("确认删除这条记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.g)(t).then(function(a){e.pictures=e.pictures.filter(function(e){return e.id!=t})})})},handleFormSave:function(){var t=this;this.$refs.formData.validate(function(e){e&&(t.pictures.push(o()({},t.formData)),t.formVisible=!1)})},updateImgUrl:function(t){console.log("上传返回",t),this.formData.imgUrl=t.imgUrl,this.formData.imgPath=t.objectKey},handleRemoteSave:function(){var t=this,e={pictures:this.pictures,remark:"更新商品图片"};Object(c.l)(this.$route.params.goodsId,e).then(function(e){t.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3})}).catch(function(t){console.log(t)}).finally(function(){})}}},R=(a("ibIy"),Object(d.a)(E,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"action"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.formOpen}},[t._v("新增")])],1),t._v(" "),a("el-row",{attrs:{gutter:10}},t._l(t.pictures,function(e){return a("el-col",{key:e.id,attrs:{span:8}},[a("el-image",{staticStyle:{width:"100%",height:"300px"},attrs:{src:e.imgUrl,alt:e.imgDesc}}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.edit"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.formOpen(e,!0)}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("table.delete"),placement:"top-start"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"action-item",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){t.handleRemove(e.id)}}})],1)],1)})),t._v(" "),a("el-row",[a("el-button",{attrs:{waves:"",type:"primary"},on:{click:t.handleRemoteSave}},[t._v(t._s(t.$t("table.submit")))])],1),t._v(" "),a("form-dialog",{attrs:{visible:t.formVisible,title:t.isEdit?t.$t("table.edit"):t.$t("table.add")},on:{"update:visible":function(e){t.formVisible=e},onCancel:t.formClose,onSubmit:t.handleFormSave}},[a("el-form",{ref:"formData",attrs:{rules:t.rules,model:t.formData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品ID",prop:"goodsId"}},[a("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:t.formData.goodsId,callback:function(e){t.$set(t.formData,"goodsId",e)},expression:"formData.goodsId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"imgUrl"}},[a("upload-image",{attrs:{value:t.formData.imgUrl||"",domain:"goods",businessNo:t.formData.id,businessType:"101500"},on:{input:t.updateImgUrl}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"byOrder"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.byOrder,callback:function(e){t.$set(t.formData,"byOrder",e)},expression:"formData.byOrder"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"imgDesc"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.formData.imgDesc,callback:function(e){t.$set(t.formData,"imgDesc",e)},expression:"formData.imgDesc"}})],1)],1)],1)],1)},[],!1,null,"a236b332",null));R.options.__file="goodsPictures.vue";var L=R.exports,q={props:{type:{type:String,default:"goodsBasic"}},components:{GoodsBasic:P,GoodsPictures:L,GoodsRecord:G},data:function(){return{}},created:function(){},methods:{}},B=Object(d.a)(q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["goodsBasic"==t.type?a("goods-basic"):t._e(),t._v(" "),"goodsPictures"==t.type?a("goods-pictures"):t._e(),t._v(" "),"goodsRecord"==t.type?a("goods-record"):t._e()],1)},[],!1,null,null,null);B.options.__file="tabPane.vue";var M={name:"goodsDetail",components:{tabPane:B.exports},data:function(){return{tabMapOptions:[{label:"基本设置",key:"goodsBasic",icon:"el-icon-third-survey1"},{label:"图片",key:"goodsPictures",icon:"el-icon-third-survey1"},{label:"操作记录",key:"goodsRecord",icon:"el-icon-third-wodedingdan"}],tabName:"goodsBasic"}},methods:{}},z=(a("/mUX"),Object(d.a)(M,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-container"},[a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},t._l(t.tabMapOptions,function(e){return a("el-tab-pane",{key:e.key,attrs:{label:e.label,name:e.key}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{class:e.icon}),t._v(" "+t._s(e.label))]),t._v(" "),a("keep-alive",[t.tabName==e.key?a("tab-pane",{attrs:{type:e.key}}):t._e()],1)],1)}))],1)},[],!1,null,"2d6e084b",null));z.options.__file="goodsDetail.vue";e.default=z.exports}}]);